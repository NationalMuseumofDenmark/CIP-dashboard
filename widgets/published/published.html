<h1>Published status</h1>
How many assets are published? <span id="published-percentage" class="large-percentage" float="float: left"></span>
<!-- <h4>Publishing overview</h4> -->
<style>table#publish-table { margin-top: 1em; border-spacing: 0.5em 0em; border-collapse: separate; }</style>
<table id="publish-table">
  <thead>
    <tr>
      <th>Publish status</th>
      <th>Percentage of assets</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
requirejs(['jquery'], function($) {
  var getPercentage = function(percentage) {
    return (percentage * 100).toFixed(1) + '%';
  }
  var getFilledPercentage = function(uuid) {
    var stats_field = CIPdashboard.stats['stats'][uuid];
    var empty_percentage = (stats_field['zero_length_values'] + stats_field['empty_values']) / CIPdashboard.stats['processed_count'];
    var filled_percentage = 1.0 - empty_percentage;
    return getPercentage(filled_percentage);
  }

  var enum_id_public = 3;
  var uuid_published = '{a493be21-0f70-4cae-9394-703eca848bad}';
  var stats_published = CIPdashboard.stats['stats'][uuid_published];
  var published_count = stats_published['enum_values'][enum_id_public];
  var percentage = published_count / CIPdashboard.stats['processed_count'];
  $('#published-percentage').text((percentage * 100).toFixed(1) + '%');

  for (var pub_status in stats_published['values']) {
    var $tr = $('<tr />');
    $tr.append('<td>' + pub_status + '</td>');
    $tr.append('<td>' + getPercentage(stats_published['values'][pub_status] / CIPdashboard.stats['processed_count']) + '</td>');
    $('#publish-table tbody').append($tr);
  }
});
</script>
